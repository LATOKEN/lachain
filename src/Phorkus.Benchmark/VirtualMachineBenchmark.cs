using System;
using Google.Protobuf;
using Phorkus.Core.Config;
using Phorkus.Core.DI;
using Phorkus.Core.DI.Modules;
using Phorkus.Core.DI.SimpleInjector;
using Phorkus.Core.VM;
using Phorkus.Proto;
using Phorkus.Storage.State;
using Phorkus.Utility;
using Phorkus.Utility.Utils;

namespace Phorkus.Benchmark
{
    public class VirtualMachineBenchmark : IBootstrapper
    {
        private readonly IContainer _container;

        public VirtualMachineBenchmark()
        {
            var containerBuilder = new SimpleInjectorContainerBuilder(
                new ConfigManager("config.json"));

            containerBuilder.RegisterModule<BlockchainModule>();
            containerBuilder.RegisterModule<ConfigModule>();
            containerBuilder.RegisterModule<CryptographyModule>();
            containerBuilder.RegisterModule<MessagingModule>();
            containerBuilder.RegisterModule<NetworkModule>();
            containerBuilder.RegisterModule<StorageModule>();

            _container = containerBuilder.Build();
        }

        public void Start(string[] args)
        {
            var virtualMachine = _container.Resolve<IVirtualMachine>();
            var stateManager = _container.Resolve<IStateManager>();

            var hash = UInt160Utils.Zero;
            var contract = new Contract
            {
                ContractAddress = hash,
                ByteCode = ByteString.CopyFrom(
                    "0061736d010000000117056000017f60037f7f7f0060017f0060027f7f0060000002ae010903656e760d6765745f63616c6c5f73697a65000003656e760f636f70795f63616c6c5f76616c7565000103656e760b73797374656d5f68616c74000203656e761063727970746f5f6b656363616b323536000103656e760c6c6f61645f73746f72616765000303656e760a6765745f73656e646572000203656e760a7365745f72657475726e000303656e760c736176655f73746f72616765000303656e760b77726974655f6576656e740001030201040405017001010105030100020608017f01419088040b071202066d656d6f7279020005737461727400090ae19e0101dd9e0104047f057e087f027e23808080800041c0026b220024808080800002400240024002400240024002400240024002400240024002400240024002400240024002400240024002400240024002400240024002401080808080004104490d004100410420001081808080000240200028000022014185fafb1e4a0d000240200141ddc9bca17f4a0d00200141a98bf0dc7b460d0520014198acb4e87d460d03200141a3f0caeb7d470d0b024010808080800041cc00460d0041061082808080000b410441cc00200010818080800041051082808080000c1d0b0240200141016a220241014d0d00200141dec9bca17f470d0b41051082808080000c1d0b20020e020107010b0240200141bf82bfc8014a0d0020014186fafb1e460d06200141db8cf2ef00470d0a0240108080808000220141034a0d0041061082808080000b4100210341002d008c88808000410171450d0841002802848880800021030c090b200141c082bfc801460d04200141f0c08a8c03460d022001419284b9fa03470d0941051082808080000c1b0b41051082808080000c1a0b20004191026a410036000020004200370089022000420037008102200041f5003a00800220004180026a411520001083808080002000200041a0026a1084808080002000210220002d0000220141ff01470d17200041003a000020002d0001220141ff01460d08200041017221020c170b02401080808080004118460d0041061082808080000b4104411820004180016a10818080800020002802900121012000290380012104200020002903880122053703a801200020043703a001200020013602b00141002d008088808000210220004191026a200136000020002005370089022000200437008102200020023a00800220004180026a411520001083808080002000200041a0026a1084808080002000210220002d0000220141ff01470d14200041003a000020002d0001220141ff01460d08200041017221020c140b02401080808080004138460d0041061082808080000b41044138200010818080800020002903002104200029030821052000280210210120002903142106200029031c2107200029032421082000200029032c370360200020083703582000200737035020002006370348200020013602782000200537037020002004370368200041a0026a108580808000200020002d00a0023a00c801200020002800a1023600c901200020002900a5023700cd01200020002800ad023600d501200020002f00b1023b00d901200020002d00b3023a00db0120004191016a20002802d801360000200020002903d00137008901200020002903c80137008101200041f7013a00800120004180016a4115200041a0026a108380808000200041a0026a20004180026a108480808000200041a0026a210220002d00a002220141ff01470d11200041003a00a00220002d00a102220141ff01460d08200041a0026a41017221020c110b02401080808080004138460d0041061082808080000b41044138200010818080800020002802102101200029030021052000290308210620002903142104200029031c2107200029032421082000200029032c370360200020083703582000200737035020002004370348200020063703d001200020053703c801200020013602d80120004191016a200136000020002006370089012000200537008101200041f7013a00800120004180016a4115200041a0026a108380808000200041a0026a20004180026a108480808000200041a0026a210220002d00a002220141ff01470d0e200041003a00a00220002d00a102220141ff01460d08200041a0026a41017221020c0e0b410021020240024041002d008c8880800022094101710d0041004100360284888080003f0021014100410136028c888080004100200141016a36028888808000410121090c010b4100280284888080002202418a807c6a2201418080046d210a200141808004480d00200a40001a4100410028028888808000200a6a3602888880800041002d008c88808000210941002802848880800021020b41002002410a6a418080046f22013602848880800020094101712109024002402002450d0020090d004100210141004100360284888080003f0021024100410136028c888080004100200241016a360288888080000c010b024020090d004100210141004100360284888080003f0021024100410136028c888080004100200241016a360288888080000c010b20014183807c6a2202418080046d2109200241808004480d00200940001a410041002802888880800020096a3602888880800041002802848880800021010b410021024100200141036a418080046f36028488808000200141cca8013b0000200141cb003a00020240024041002d008c888080004101710d0041004100360284888080003f0021094100410136028c888080004100200941016a360288888080000c010b41002802848880800022024187807c6a2209418080046d210a200941808004480d00200a40001a4100410028028888808000200a6a3602888880800041002802848880800021020b4100200241076a418080046f3602848880800020024103360000200220012d00003a0004200220012d00013a0005200220012d00023a00062002410710868080800041002d008c888080004101710d1541004100360284888080003f0021014100410136028c888080004100200141016a360288888080000c150b02401080808080004124460d0041061082808080000b4104412420004180026a10818080800020002903800221042000290388022105200029039002210620002903980221072000108580808000200020002d00003a008001200020002800013600810120002000290005370085012000200028000d36008d01200020002f00113b009101200020002d00133a009301200041b1016a20002802900136000020002000290388013700a90120002000290380013700a101200041f7013a00a001200041a0016a41152000108380808000200020074238883c00bf02200020074230883c00be02200020074228883c00bd02200020074220883c00bc02200020074218883c00bb02200020074210883c00ba02200020074208883c00b902200020073c00b802200020064238883c00b702200020064230883c00b602200020064228883c00b502200020064220883c00b402200020064218883c00b302200020064210883c00b202200020064208883c00b102200020063c00b002200020054238883c00af02200020054230883c00ae02200020054228883c00ad02200020054220883c00ac02200020054218883c00ab02200020054210883c00aa02200020054208883c00a902200020053c00a802200020044238883c00a702200020044230883c00a602200020044228883c00a502200020044220883c00a402200020044218883c00a302200020044210883c00a202200020044208883c00a102200020043c00a0022000200041a0026a1087808080002000210220002d0000220141ff01470d0a200041003a000020002d0001220141ff01460d07200041017221020c0a0b41004100360284888080003f0021024100410136028c888080004100200241016a360288888080000b2001417c6a2109200120036a41fcff7b6a2202418080046d210a0240200241808004480d00200a40001a4100410028028888808000200a6a3602888880800041002802848880800021030b410021024100200920036a418080046f360284888080004104200120031081808080000240024041002d008c88808000220a4101710d0041004100360284888080003f0021014100410136028c888080004100200141016a360288888080004101210a0c010b4100280284888080002202418a807c6a2201418080046d2109200141808004480d00200940001a410041002802888880800020096a3602888880800041002d008c88808000210a41002802848880800021020b41002002410a6a418080046f2201360284888080000240200a4101710d0041004100360284888080003f0021014100410136028c888080004100200141016a360288888080004101210a410021010b410020013602848880800020032d0007220b41087420032d0006220c7241087420032d0005220d7241087420032d0004220e722102200121090240200a4101710d004100210941004100360284888080003f00210a4100410136028c888080004100200a41016a360288888080000b200220096a4180807c6a220a418080046d210f0240200a41808004480d00200f40001a4100410028028888808000200f6a3602888880800041002802848880800021090b4100200920026a418080046f3602848880800002402001450d0041002d008c888080004101710d0041004100360284888080003f0021014100410136028c888080004100200141016a360288888080000b02402002450d00200341086a210f410021010340200f20016a2d0000210a02402001417f4a0d0041021082808080000b200920016a200a3a00002002200141016a2201470d000b0b4100210a0240024041002d008c88808000410171450d00410028028488808000210a0c010b41004100360284888080003f0021014100410136028c888080004100200141016a360288888080000b200241046a210f2002200a6a4184807c6a2201418080046d21100240200141808004480d00201040001a410041002802888880800020106a36028888808000410028028488808000210a0b410021014100200a200f6a418080046f36028488808000200a200b3a0003200a200c3a0002200a200d3a0001200a200e3a000002402002450d00034002402001417f4a0d0041021082808080000b200a20016a41046a200920016a2d00003a00002002200141016a2201470d000b200a200f1086808080000c070b200a200f108680808000200a0d0641002d008c8880800021010c070b41051082808080000c110b200041003a0001024020002d0002220141ff01460d00200041027221020c0f0b200041003a0002024020002d0003220141ff01460d00200041037221020c0f0b200041003a0003024020002d0004220141ff01460d00200041047221020c0f0b200041003a0004024020002d0005220141ff01460d00200041057221020c0f0b200041003a0005024020002d0006220141ff01460d00200041067221020c0f0b200041003a0006024020002d0007220141ff01460d00200041077221020c0f0b200041003a0007024020002d0008220141ff01460d00200041087221020c0f0b200041003a0008024020002d0009220141ff01460d00200041097221020c0f0b200041003a0009024020002d000a220141ff01460d002000410a7221020c0f0b200041003a000a024020002d000b220141ff01460d002000410b7221020c0f0b200041003a000b024020002d000c220141ff01460d002000410c7221020c0f0b200041003a000c024020002d000d220141ff01460d002000410d7221020c0f0b200041003a000d024020002d000e220141ff01460d002000410e7221020c0f0b200041003a000e024020002d000f220141ff01460d002000410f7221020c0f0b200041003a000f024020002d0010220141ff01460d00200041106a21020c0f0b200041003a0010024020002d0011220141ff01460d00200041116a21020c0f0b200041003a0011024020002d0012220141ff01460d00200041126a21020c0f0b200041003a0012024020002d0013220141ff01460d00200041136a21020c0f0b200041003a0013024020002d0014220141ff01460d00200041146a21020c0f0b200041003a0014024020002d0015220141ff01460d00200041156a21020c0f0b200041003a0015024020002d0016220141ff01460d00200041166a21020c0f0b200041003a0016024020002d0017220141ff01460d00200041176a21020c0f0b200041003a0017024020002d0018220141ff01460d00200041186a21020c0f0b200041003a0018024020002d0019220141ff01460d00200041196a21020c0f0b200041003a0019024020002d001a220141ff01460d002000411a6a21020c0f0b200041003a001a024020002d001b220141ff01460d002000411b6a21020c0f0b200041003a001b024020002d001c220141ff01460d002000411c6a21020c0f0b200041003a001c024020002d001d220141ff01460d002000411d6a21020c0f0b200041003a001d024020002d001e220141ff01460d002000411e6a21020c0f0b200041003a001e024020002d001f220141ff01460d002000411f6a21020c0f0b200041003a001f0c0f0b200041003a0001024020002d0002220141ff01460d00200041027221020c0c0b200041003a0002024020002d0003220141ff01460d00200041037221020c0c0b200041003a0003024020002d0004220141ff01460d00200041047221020c0c0b200041003a0004024020002d0005220141ff01460d00200041057221020c0c0b200041003a0005024020002d0006220141ff01460d00200041067221020c0c0b200041003a0006024020002d0007220141ff01460d00200041077221020c0c0b200041003a0007024020002d0008220141ff01460d00200041087221020c0c0b200041003a0008024020002d0009220141ff01460d00200041097221020c0c0b200041003a0009024020002d000a220141ff01460d002000410a7221020c0c0b200041003a000a024020002d000b220141ff01460d002000410b7221020c0c0b200041003a000b024020002d000c220141ff01460d002000410c7221020c0c0b200041003a000c024020002d000d220141ff01460d002000410d7221020c0c0b200041003a000d024020002d000e220141ff01460d002000410e7221020c0c0b200041003a000e024020002d000f220141ff01460d002000410f7221020c0c0b200041003a000f024020002d0010220141ff01460d00200041106a21020c0c0b200041003a0010024020002d0011220141ff01460d00200041116a21020c0c0b200041003a0011024020002d0012220141ff01460d00200041126a21020c0c0b200041003a0012024020002d0013220141ff01460d00200041136a21020c0c0b200041003a0013024020002d0014220141ff01460d00200041146a21020c0c0b200041003a0014024020002d0015220141ff01460d00200041156a21020c0c0b200041003a0015024020002d0016220141ff01460d00200041166a21020c0c0b200041003a0016024020002d0017220141ff01460d00200041176a21020c0c0b200041003a0017024020002d0018220141ff01460d00200041186a21020c0c0b200041003a0018024020002d0019220141ff01460d00200041196a21020c0c0b200041003a0019024020002d001a220141ff01460d002000411a6a21020c0c0b200041003a001a024020002d001b220141ff01460d002000411b6a21020c0c0b200041003a001b024020002d001c220141ff01460d002000411c6a21020c0c0b200041003a001c024020002d001d220141ff01460d002000411d6a21020c0c0b200041003a001d024020002d001e220141ff01460d002000411e6a21020c0c0b200041003a001e024020002d001f220141ff01460d002000411f6a21020c0c0b200041003a001f0c0c0b200041003a00a102024020002d00a202220141ff01460d00200041a0026a41027221020c090b200041003a00a202024020002d00a302220141ff01460d00200041a0026a41037221020c090b200041003a00a302024020002d00a402220141ff01460d00200041a0026a41047221020c090b200041003a00a402024020002d00a502220141ff01460d00200041a0026a41057221020c090b200041003a00a502024020002d00a602220141ff01460d00200041a0026a41067221020c090b200041003a00a602024020002d00a702220141ff01460d00200041a0026a41077221020c090b200041003a00a702024020002d00a802220141ff01460d00200041a0026a41087221020c090b200041003a00a802024020002d00a902220141ff01460d00200041a0026a41097221020c090b200041003a00a902024020002d00aa02220141ff01460d00200041a0026a410a7221020c090b200041003a00aa02024020002d00ab02220141ff01460d00200041a0026a410b7221020c090b200041003a00ab02024020002d00ac02220141ff01460d00200041a0026a410c7221020c090b200041003a00ac02024020002d00ad02220141ff01460d00200041a0026a410d7221020c090b200041003a00ad02024020002d00ae02220141ff01460d00200041a0026a410e7221020c090b200041003a00ae02024020002d00af02220141ff01460d00200041a0026a410f7221020c090b200041003a00af02024020002d00b002220141ff01460d00200041b0026a21020c090b200041003a00b002024020002d00b102220141ff01460d00200041b1026a21020c090b200041003a00b102024020002d00b202220141ff01460d00200041b2026a21020c090b200041003a00b202024020002d00b302220141ff01460d00200041b3026a21020c090b200041003a00b302024020002d00b402220141ff01460d00200041b4026a21020c090b200041003a00b402024020002d00b502220141ff01460d00200041b5026a21020c090b200041003a00b502024020002d00b602220141ff01460d00200041b6026a21020c090b200041003a00b602024020002d00b702220141ff01460d00200041b7026a21020c090b200041003a00b702024020002d00b802220141ff01460d00200041b8026a21020c090b200041003a00b802024020002d00b902220141ff01460d00200041b9026a21020c090b200041003a00b902024020002d00ba02220141ff01460d00200041ba026a21020c090b200041003a00ba02024020002d00bb02220141ff01460d00200041bb026a21020c090b200041003a00bb02024020002d00bc02220141ff01460d00200041bc026a21020c090b200041003a00bc02024020002d00bd02220141ff01460d00200041bd026a21020c090b200041003a00bd02024020002d00be02220141ff01460d00200041be026a21020c090b200041003a00be02024020002d00bf02220141ff01460d00200041bf026a21020c090b200041003a00bf020c090b200041003a00a102024020002d00a202220141ff01460d00200041a0026a41027221020c060b200041003a00a202024020002d00a302220141ff01460d00200041a0026a41037221020c060b200041003a00a302024020002d00a402220141ff01460d00200041a0026a41047221020c060b200041003a00a402024020002d00a502220141ff01460d00200041a0026a41057221020c060b200041003a00a502024020002d00a602220141ff01460d00200041a0026a41067221020c060b200041003a00a602024020002d00a702220141ff01460d00200041a0026a41077221020c060b200041003a00a702024020002d00a802220141ff01460d00200041a0026a41087221020c060b200041003a00a802024020002d00a902220141ff01460d00200041a0026a41097221020c060b200041003a00a902024020002d00aa02220141ff01460d00200041a0026a410a7221020c060b200041003a00aa02024020002d00ab02220141ff01460d00200041a0026a410b7221020c060b200041003a00ab02024020002d00ac02220141ff01460d00200041a0026a410c7221020c060b200041003a00ac02024020002d00ad02220141ff01460d00200041a0026a410d7221020c060b200041003a00ad02024020002d00ae02220141ff01460d00200041a0026a410e7221020c060b200041003a00ae02024020002d00af02220141ff01460d00200041a0026a410f7221020c060b200041003a00af02024020002d00b002220141ff01460d00200041b0026a21020c060b200041003a00b002024020002d00b102220141ff01460d00200041b1026a21020c060b200041003a00b102024020002d00b202220141ff01460d00200041b2026a21020c060b200041003a00b202024020002d00b302220141ff01460d00200041b3026a21020c060b200041003a00b302024020002d00b402220141ff01460d00200041b4026a21020c060b200041003a00b402024020002d00b502220141ff01460d00200041b5026a21020c060b200041003a00b502024020002d00b602220141ff01460d00200041b6026a21020c060b200041003a00b602024020002d00b702220141ff01460d00200041b7026a21020c060b200041003a00b702024020002d00b802220141ff01460d00200041b8026a21020c060b200041003a00b802024020002d00b902220141ff01460d00200041b9026a21020c060b200041003a00b902024020002d00ba02220141ff01460d00200041ba026a21020c060b200041003a00ba02024020002d00bb02220141ff01460d00200041bb026a21020c060b200041003a00bb02024020002d00bc02220141ff01460d00200041bc026a21020c060b200041003a00bc02024020002d00bd02220141ff01460d00200041bd026a21020c060b200041003a00bd02024020002d00be02220141ff01460d00200041be026a21020c060b200041003a00be02024020002d00bf02220141ff01460d00200041bf026a21020c060b200041003a00bf020c060b200041003a0001024020002d0002220141ff01460d00200041027221020c030b200041003a0002024020002d0003220141ff01460d00200041037221020c030b200041003a0003024020002d0004220141ff01460d00200041047221020c030b200041003a0004024020002d0005220141ff01460d00200041057221020c030b200041003a0005024020002d0006220141ff01460d00200041067221020c030b200041003a0006024020002d0007220141ff01460d00200041077221020c030b200041003a0007024020002d0008220141ff01460d00200041087221020c030b200041003a0008024020002d0009220141ff01460d00200041097221020c030b200041003a0009024020002d000a220141ff01460d002000410a7221020c030b200041003a000a024020002d000b220141ff01460d002000410b7221020c030b200041003a000b024020002d000c220141ff01460d002000410c7221020c030b200041003a000c024020002d000d220141ff01460d002000410d7221020c030b200041003a000d024020002d000e220141ff01460d002000410e7221020c030b200041003a000e024020002d000f220141ff01460d002000410f7221020c030b200041003a000f024020002d0010220141ff01460d00200041106a21020c030b200041003a0010024020002d0011220141ff01460d00200041116a21020c030b200041003a0011024020002d0012220141ff01460d00200041126a21020c030b200041003a0012024020002d0013220141ff01460d00200041136a21020c030b200041003a0013024020002d0014220141ff01460d00200041146a21020c030b200041003a0014024020002d0015220141ff01460d00200041156a21020c030b200041003a0015024020002d0016220141ff01460d00200041166a21020c030b200041003a0016024020002d0017220141ff01460d00200041176a21020c030b200041003a0017024020002d0018220141ff01460d00200041186a21020c030b200041003a0018024020002d0019220141ff01460d00200041196a21020c030b200041003a0019024020002d001a220141ff01460d002000411a6a21020c030b200041003a001a024020002d001b220141ff01460d002000411b6a21020c030b200041003a001b024020002d001c220141ff01460d002000411c6a21020c030b200041003a001c024020002d001d220141ff01460d002000411d6a21020c030b200041003a001d024020002d001e220141ff01460d002000411e6a21020c030b200041003a001e024020002d001f220141ff01460d002000411f6a21020c030b200041003a001f0c030b024041002d008c8880800022014101710d0041004100360284888080003f0021014100410136028c888080004100200141016a36028888808000410121010b2003450d0b0b20014101710d0a41004100360284888080003f0021014100410136028c888080004100200141016a360288888080000c0a0b2002200141016a3a00000b2000108580808000200020002d00003a008001200020002800013600810120002000290005370085012000200028000d36008d01200020002f00113b009101200020002d00133a009301200041b1016a4100360000200042003700a901200042003700a101200041b7013a00a001200041a0016a41152000108380808000200041b0026a20002802900136020020002000290388013703a80220002000290380013703a0022000200041a0026a108780808000200021020240024020002d0000220141ff01470d00200041003a0000024020002d0001220141ff01460d00200041017221020c010b200041003a0001024020002d0002220141ff01460d00200041027221020c010b200041003a0002024020002d0003220141ff01460d00200041037221020c010b200041003a0003024020002d0004220141ff01460d00200041047221020c010b200041003a0004024020002d0005220141ff01460d00200041057221020c010b200041003a0005024020002d0006220141ff01460d00200041067221020c010b200041003a0006024020002d0007220141ff01460d00200041077221020c010b200041003a0007024020002d0008220141ff01460d00200041087221020c010b200041003a0008024020002d0009220141ff01460d00200041097221020c010b200041003a0009024020002d000a220141ff01460d002000410a7221020c010b200041003a000a024020002d000b220141ff01460d002000410b7221020c010b200041003a000b024020002d000c220141ff01460d002000410c7221020c010b200041003a000c024020002d000d220141ff01460d002000410d7221020c010b200041003a000d024020002d000e220141ff01460d002000410e7221020c010b200041003a000e024020002d000f220141ff01460d002000410f7221020c010b200041003a000f024020002d0010220141ff01460d00200041106a21020c010b200041003a0010024020002d0011220141ff01460d00200041116a21020c010b200041003a0011024020002d0012220141ff01460d00200041126a21020c010b200041003a0012024020002d0013220141ff01460d00200041136a21020c010b200041003a0013024020002d0014220141ff01460d00200041146a21020c010b200041003a0014024020002d0015220141ff01460d00200041156a21020c010b200041003a0015024020002d0016220141ff01460d00200041166a21020c010b200041003a0016024020002d0017220141ff01460d00200041176a21020c010b200041003a0017024020002d0018220141ff01460d00200041186a21020c010b200041003a0018024020002d0019220141ff01460d00200041196a21020c010b200041003a0019024020002d001a220141ff01460d002000411a6a21020c010b200041003a001a024020002d001b220141ff01460d002000411b6a21020c010b200041003a001b024020002d001c220141ff01460d002000411c6a21020c010b200041003a001c024020002d001d220141ff01460d002000411d6a21020c010b200041003a001d024020002d001e220141ff01460d002000411e6a21020c010b200041003a001e024020002d001f220141ff01460d002000411f6a21020c010b200041003a001f0c010b2002200141016a3a00000b200041186a4200370300200041106a4200370300200041086a4200370300200042003703002000419ed6f2d67b3602a0022000200041a0026a41041088808080000c080b2002200141016a3a0000200029034821040b200020002903800222073703a001200020002903880222083703a801200020002903900222113703b001200020002903980222123703b80142002105200041b8026a4200370300200041b0026a4200370300200041a8026a4200370300200042003703a002420021060240200420077c220720045a0d0042012106200042013703a8020b200020073703a0022000290350220720087c220820067c21040240024020082007540d00200642005220045071450d010b42012105200042013703b0020b200020043703a8022000290358220620117c220720057c21040240024020072006540d0042002106200542005220045071450d010b42012106200042013703b8020b200041a0016a41106a22012004370300200041a0016a41086a2202200041a0026a41086a290300370300200041b8016a2209200029036020127c20067c370300200020002903a0023703a00120004191016a200041c8016a41106a2802003600002000200041c8016a41086a29030037008901200020002903c80137008101200041f7013a00800120004180016a4115200041a0026a108380808000200020002903a00137038002200020022903003703880220002001290300370390022000200929030037039802200041a0026a20004180026a108780808000200041a0026a21020240024020002d00a002220141ff01470d00200041003a00a002024020002d00a102220141ff01460d00200041a0026a41017221020c010b200041003a00a102024020002d00a202220141ff01460d00200041a0026a41027221020c010b200041003a00a202024020002d00a302220141ff01460d00200041a0026a41037221020c010b200041003a00a302024020002d00a402220141ff01460d00200041a0026a41047221020c010b200041003a00a402024020002d00a502220141ff01460d00200041a0026a41057221020c010b200041003a00a502024020002d00a602220141ff01460d00200041a0026a41067221020c010b200041003a00a602024020002d00a702220141ff01460d00200041a0026a41077221020c010b200041003a00a702024020002d00a802220141ff01460d00200041a0026a41087221020c010b200041003a00a802024020002d00a902220141ff01460d00200041a0026a41097221020c010b200041003a00a902024020002d00aa02220141ff01460d00200041a0026a410a7221020c010b200041003a00aa02024020002d00ab02220141ff01460d00200041a0026a410b7221020c010b200041003a00ab02024020002d00ac02220141ff01460d00200041a0026a410c7221020c010b200041003a00ac02024020002d00ad02220141ff01460d00200041a0026a410d7221020c010b200041003a00ad02024020002d00ae02220141ff01460d00200041a0026a410e7221020c010b200041003a00ae02024020002d00af02220141ff01460d00200041a0026a410f7221020c010b200041003a00af02024020002d00b002220141ff01460d00200041b0026a21020c010b200041003a00b002024020002d00b102220141ff01460d00200041b1026a21020c010b200041003a00b102024020002d00b202220141ff01460d00200041b2026a21020c010b200041003a00b202024020002d00b302220141ff01460d00200041b3026a21020c010b200041003a00b302024020002d00b402220141ff01460d00200041b4026a21020c010b200041003a00b402024020002d00b502220141ff01460d00200041b5026a21020c010b200041003a00b502024020002d00b602220141ff01460d00200041b6026a21020c010b200041003a00b602024020002d00b702220141ff01460d00200041b7026a21020c010b200041003a00b702024020002d00b802220141ff01460d00200041b8026a21020c010b200041003a00b802024020002d00b902220141ff01460d00200041b9026a21020c010b200041003a00b902024020002d00ba02220141ff01460d00200041ba026a21020c010b200041003a00ba02024020002d00bb02220141ff01460d00200041bb026a21020c010b200041003a00bb02024020002d00bc02220141ff01460d00200041bc026a21020c010b200041003a00bc02024020002d00bd02220141ff01460d00200041bd026a21020c010b200041003a00bd02024020002d00be02220141ff01460d00200041be026a21020c010b200041003a00be02024020002d00bf02220141ff01460d00200041bf026a21020c010b200041003a00bf020c010b2002200141016a3a00000b200041f1016a4100360000200042003700e901200042003700e101200041f5003a00e001200041e0016a4115200041a0026a108380808000200041a0026a20004180026a108480808000200041a0026a21020240024020002d00a002220141ff01470d00200041003a00a002024020002d00a102220141ff01460d00200041a0026a41017221020c010b200041003a00a102024020002d00a202220141ff01460d00200041a0026a41027221020c010b200041003a00a202024020002d00a302220141ff01460d00200041a0026a41037221020c010b200041003a00a302024020002d00a402220141ff01460d00200041a0026a41047221020c010b200041003a00a402024020002d00a502220141ff01460d00200041a0026a41057221020c010b200041003a00a502024020002d00a602220141ff01460d00200041a0026a41067221020c010b200041003a00a602024020002d00a702220141ff01460d00200041a0026a41077221020c010b200041003a00a702024020002d00a802220141ff01460d00200041a0026a41087221020c010b200041003a00a802024020002d00a902220141ff01460d00200041a0026a41097221020c010b200041003a00a902024020002d00aa02220141ff01460d00200041a0026a410a7221020c010b200041003a00aa02024020002d00ab02220141ff01460d00200041a0026a410b7221020c010b200041003a00ab02024020002d00ac02220141ff01460d00200041a0026a410c7221020c010b200041003a00ac02024020002d00ad02220141ff01460d00200041a0026a410d7221020c010b200041003a00ad02024020002d00ae02220141ff01460d00200041a0026a410e7221020c010b200041003a00ae02024020002d00af02220141ff01460d00200041a0026a410f7221020c010b200041003a00af02024020002d00b002220141ff01460d00200041b0026a21020c010b200041003a00b002024020002d00b102220141ff01460d00200041b1026a21020c010b200041003a00b102024020002d00b202220141ff01460d00200041b2026a21020c010b200041003a00b202024020002d00b302220141ff01460d00200041b3026a21020c010b200041003a00b302024020002d00b402220141ff01460d00200041b4026a21020c010b200041003a00b402024020002d00b502220141ff01460d00200041b5026a21020c010b200041003a00b502024020002d00b602220141ff01460d00200041b6026a21020c010b200041003a00b602024020002d00b702220141ff01460d00200041b7026a21020c010b200041003a00b702024020002d00b802220141ff01460d00200041b8026a21020c010b200041003a00b802024020002d00b902220141ff01460d00200041b9026a21020c010b200041003a00b902024020002d00ba02220141ff01460d00200041ba026a21020c010b200041003a00ba02024020002d00bb02220141ff01460d00200041bb026a21020c010b200041003a00bb02024020002d00bc02220141ff01460d00200041bc026a21020c010b200041003a00bc02024020002d00bd02220141ff01460d00200041bd026a21020c010b200041003a00bd02024020002d00be02220141ff01460d00200041be026a21020c010b200041003a00be02024020002d00bf02220141ff01460d00200041bf026a21020c010b200041003a00bf020c010b2002200141016a3a00000b200020002903800222063703800120002000290388022207370388012000200029039002220837039001200020002903980222113703980142002104200041b8026a4200370300200041b0026a4200370300200041a8026a4200370300200042003703a0024200210502402006200029034822127c220620125a0d0042012105200042013703a8020b200020063703a0022000290350221220077c220720057c21060240024020072012540d00200542005220065071450d010b42012104200042013703b0020b200020063703a8022000290358220620087c220720047c21050240024020072006540d0042002106200442005220055071450d010b42012106200042013703b8020b20004190016a2201200537030020004180016a41086a2202200041a0026a41086a29030037030020004198016a2209200029036020117c20067c370300200020002903a00237038001200041f1016a4100360000200042003700e901200042003700e101200041f5003a00e001200041e0016a4115200041a0026a108380808000200020002903800137038002200020022903003703880220002001290300370390022000200929030037039802200041a0026a20004180026a108780808000200041a0026a2102024020002d00a002220141ff01470d00200041003a00a002024020002d00a102220141ff01460d00200041a0026a41017221020c010b200041003a00a102024020002d00a202220141ff01460d00200041a0026a41027221020c010b200041003a00a202024020002d00a302220141ff01460d00200041a0026a41037221020c010b200041003a00a302024020002d00a402220141ff01460d00200041a0026a41047221020c010b200041003a00a402024020002d00a502220141ff01460d00200041a0026a41057221020c010b200041003a00a502024020002d00a602220141ff01460d00200041a0026a41067221020c010b200041003a00a602024020002d00a702220141ff01460d00200041a0026a41077221020c010b200041003a00a702024020002d00a802220141ff01460d00200041a0026a41087221020c010b200041003a00a802024020002d00a902220141ff01460d00200041a0026a41097221020c010b200041003a00a902024020002d00aa02220141ff01460d00200041a0026a410a7221020c010b200041003a00aa02024020002d00ab02220141ff01460d00200041a0026a410b7221020c010b200041003a00ab02024020002d00ac02220141ff01460d00200041a0026a410c7221020c010b200041003a00ac02024020002d00ad02220141ff01460d00200041a0026a410d7221020c010b200041003a00ad02024020002d00ae02220141ff01460d00200041a0026a410e7221020c010b200041003a00ae02024020002d00af02220141ff01460d00200041a0026a410f7221020c010b200041003a00af02024020002d00b002220141ff01460d00200041b0026a21020c010b200041003a00b002024020002d00b102220141ff01460d00200041b1026a21020c010b200041003a00b102024020002d00b202220141ff01460d00200041b2026a21020c010b200041003a00b202024020002d00b302220141ff01460d00200041b3026a21020c010b200041003a00b302024020002d00b402220141ff01460d00200041b4026a21020c010b200041003a00b402024020002d00b502220141ff01460d00200041b5026a21020c010b200041003a00b502024020002d00b602220141ff01460d00200041b6026a21020c010b200041003a00b602024020002d00b702220141ff01460d00200041b7026a21020c010b200041003a00b702024020002d00b802220141ff01460d00200041b8026a21020c010b200041003a00b802024020002d00b902220141ff01460d00200041b9026a21020c010b200041003a00b902024020002d00ba02220141ff01460d00200041ba026a21020c010b200041003a00ba02024020002d00bb02220141ff01460d00200041bb026a21020c010b200041003a00bb02024020002d00bc02220141ff01460d00200041bc026a21020c010b200041003a00bc02024020002d00bd02220141ff01460d00200041bd026a21020c010b200041003a00bd02024020002d00be02220141ff01460d00200041be026a21020c010b200041003a00be02024020002d00bf02220141ff01460d00200041bf026a21020c010b200041003a00bf020c070b2002200141016a3a00000c060b2002200141016a3a00000b200020002903800222043703a001200020002903880222073703a801200020002903900222063703b001200020002903980222053703b801200521112000290360220821120240024020052008520d0020062111200620002903582212520d0020072111200720002903502212520d0020042111200420002903482212510d010b201120125a0d0041041082808080000b200041a8026a4200370300200041b0026a4200370300200041b8026a4200370300200042003703a00220052008427f857c20062000290358427f857c220820065420072000290350427f857c2205200754200420002903482211427f857c2212200454220120052001ad7c2205507172220120082001ad7c2206507172ad7c2107024002400240200420117d220420125a0d00200020043703a002200042013703a8020240200542017c22042005540d00200421050c020b200020043703a802200042013703b0020240200642017c22042006540d00200020043703b0020c030b200020043703b002200042013703b802200742017c21070c020b200020043703a0020b200020053703a802200020063703b0020b200041b8016a22012007370300200041a0016a41086a2202200041a0026a41086a290300370300200041a0016a41106a2209200041a0026a41106a290300370300200020002903a0023703a00120004191016a200041c8016a41106a2802003600002000200041c8016a41086a29030037008901200020002903c80137008101200041f7013a00800120004180016a4115200041a0026a108380808000200020002903a00137038002200020022903003703880220002009290300370390022000200129030037039802200041a0026a20004180026a108780808000200041a0026a21020240024020002d00a002220141ff01470d00200041003a00a002024020002d00a102220141ff01460d00200041a0026a41017221020c010b200041003a00a102024020002d00a202220141ff01460d00200041a0026a41027221020c010b200041003a00a202024020002d00a302220141ff01460d00200041a0026a41037221020c010b200041003a00a302024020002d00a402220141ff01460d00200041a0026a41047221020c010b200041003a00a402024020002d00a502220141ff01460d00200041a0026a41057221020c010b200041003a00a502024020002d00a602220141ff01460d00200041a0026a41067221020c010b200041003a00a602024020002d00a702220141ff01460d00200041a0026a41077221020c010b200041003a00a702024020002d00a802220141ff01460d00200041a0026a41087221020c010b200041003a00a802024020002d00a902220141ff01460d00200041a0026a41097221020c010b200041003a00a902024020002d00aa02220141ff01460d00200041a0026a410a7221020c010b200041003a00aa02024020002d00ab02220141ff01460d00200041a0026a410b7221020c010b200041003a00ab02024020002d00ac02220141ff01460d00200041a0026a410c7221020c010b200041003a00ac02024020002d00ad02220141ff01460d00200041a0026a410d7221020c010b200041003a00ad02024020002d00ae02220141ff01460d00200041a0026a410e7221020c010b200041003a00ae02024020002d00af02220141ff01460d00200041a0026a410f7221020c010b200041003a00af02024020002d00b002220141ff01460d00200041b0026a21020c010b200041003a00b002024020002d00b102220141ff01460d00200041b1026a21020c010b200041003a00b102024020002d00b202220141ff01460d00200041b2026a21020c010b200041003a00b202024020002d00b302220141ff01460d00200041b3026a21020c010b200041003a00b302024020002d00b402220141ff01460d00200041b4026a21020c010b200041003a00b402024020002d00b502220141ff01460d00200041b5026a21020c010b200041003a00b502024020002d00b602220141ff01460d00200041b6026a21020c010b200041003a00b602024020002d00b702220141ff01460d00200041b7026a21020c010b200041003a00b702024020002d00b802220141ff01460d00200041b8026a21020c010b200041003a00b802024020002d00b902220141ff01460d00200041b9026a21020c010b200041003a00b902024020002d00ba02220141ff01460d00200041ba026a21020c010b200041003a00ba02024020002d00bb02220141ff01460d00200041bb026a21020c010b200041003a00bb02024020002d00bc02220141ff01460d00200041bc026a21020c010b200041003a00bc02024020002d00bd02220141ff01460d00200041bd026a21020c010b200041003a00bd02024020002d00be02220141ff01460d00200041be026a21020c010b200041003a00be02024020002d00bf02220141ff01460d00200041bf026a21020c010b200041003a00bf020c010b2002200141016a3a00000b200041f1016a200041f8006a2802003600002000200041f0006a2903003700e901200020002903683700e101200041f7013a00e001200041e0016a4115200041a0026a108380808000200041a0026a20004180026a108480808000200041a0026a21020240024020002d00a002220141ff01470d00200041003a00a002024020002d00a102220141ff01460d00200041a0026a41017221020c010b200041003a00a102024020002d00a202220141ff01460d00200041a0026a41027221020c010b200041003a00a202024020002d00a302220141ff01460d00200041a0026a41037221020c010b200041003a00a302024020002d00a402220141ff01460d00200041a0026a41047221020c010b200041003a00a402024020002d00a502220141ff01460d00200041a0026a41057221020c010b200041003a00a502024020002d00a602220141ff01460d00200041a0026a41067221020c010b200041003a00a602024020002d00a702220141ff01460d00200041a0026a41077221020c010b200041003a00a702024020002d00a802220141ff01460d00200041a0026a41087221020c010b200041003a00a802024020002d00a902220141ff01460d00200041a0026a41097221020c010b200041003a00a902024020002d00aa02220141ff01460d00200041a0026a410a7221020c010b200041003a00aa02024020002d00ab02220141ff01460d00200041a0026a410b7221020c010b200041003a00ab02024020002d00ac02220141ff01460d00200041a0026a410c7221020c010b200041003a00ac02024020002d00ad02220141ff01460d00200041a0026a410d7221020c010b200041003a00ad02024020002d00ae02220141ff01460d00200041a0026a410e7221020c010b200041003a00ae02024020002d00af02220141ff01460d00200041a0026a410f7221020c010b200041003a00af02024020002d00b002220141ff01460d00200041b0026a21020c010b200041003a00b002024020002d00b102220141ff01460d00200041b1026a21020c010b200041003a00b102024020002d00b202220141ff01460d00200041b2026a21020c010b200041003a00b202024020002d00b302220141ff01460d00200041b3026a21020c010b200041003a00b302024020002d00b402220141ff01460d00200041b4026a21020c010b200041003a00b402024020002d00b502220141ff01460d00200041b5026a21020c010b200041003a00b502024020002d00b602220141ff01460d00200041b6026a21020c010b200041003a00b602024020002d00b702220141ff01460d00200041b7026a21020c010b200041003a00b702024020002d00b802220141ff01460d00200041b8026a21020c010b200041003a00b802024020002d00b902220141ff01460d00200041b9026a21020c010b200041003a00b902024020002d00ba02220141ff01460d00200041ba026a21020c010b200041003a00ba02024020002d00bb02220141ff01460d00200041bb026a21020c010b200041003a00bb02024020002d00bc02220141ff01460d00200041bc026a21020c010b200041003a00bc02024020002d00bd02220141ff01460d00200041bd026a21020c010b200041003a00bd02024020002d00be02220141ff01460d00200041be026a21020c010b200041003a00be02024020002d00bf02220141ff01460d00200041bf026a21020c010b200041003a00bf020c010b2002200141016a3a00000b200020002903800222063703800120002000290388022207370388012000200029039002220837039001200020002903980222113703980142002104200041b8026a4200370300200041b0026a4200370300200041a8026a4200370300200042003703a0024200210502402006200029034822127c220620125a0d0042012105200042013703a8020b200020063703a0022000290350221220077c220720057c21060240024020072012540d00200542005220065071450d010b42012104200042013703b0020b200020063703a8022000290358220620087c220720047c21050240024020072006540d0042002106200442005220055071450d010b42012106200042013703b8020b20004180016a41106a2201200537030020004180016a41086a2202200041a0026a41086a29030037030020004198016a2209200029036020117c20067c370300200020002903a00237038001200041f1016a200041e8006a41106a2802003600002000200041e8006a41086a2903003700e901200020002903683700e101200041f7013a00e001200041e0016a4115200041a0026a108380808000200020002903800137038002200020022903003703880220002001290300370390022000200929030037039802200041a0026a20004180026a108780808000200041a0026a21020240024020002d00a002220141ff01470d00200041003a00a002024020002d00a102220141ff01460d00200041a0026a41017221020c010b200041003a00a102024020002d00a202220141ff01460d00200041a0026a41027221020c010b200041003a00a202024020002d00a302220141ff01460d00200041a0026a41037221020c010b200041003a00a302024020002d00a402220141ff01460d00200041a0026a41047221020c010b200041003a00a402024020002d00a502220141ff01460d00200041a0026a41057221020c010b200041003a00a502024020002d00a602220141ff01460d00200041a0026a41067221020c010b200041003a00a602024020002d00a702220141ff01460d00200041a0026a41077221020c010b200041003a00a702024020002d00a802220141ff01460d00200041a0026a41087221020c010b200041003a00a802024020002d00a902220141ff01460d00200041a0026a41097221020c010b200041003a00a902024020002d00aa02220141ff01460d00200041a0026a410a7221020c010b200041003a00aa02024020002d00ab02220141ff01460d00200041a0026a410b7221020c010b200041003a00ab02024020002d00ac02220141ff01460d00200041a0026a410c7221020c010b200041003a00ac02024020002d00ad02220141ff01460d00200041a0026a410d7221020c010b200041003a00ad02024020002d00ae02220141ff01460d00200041a0026a410e7221020c010b200041003a00ae02024020002d00af02220141ff01460d00200041a0026a410f7221020c010b200041003a00af02024020002d00b002220141ff01460d00200041b0026a21020c010b200041003a00b002024020002d00b102220141ff01460d00200041b1026a21020c010b200041003a00b102024020002d00b202220141ff01460d00200041b2026a21020c010b200041003a00b202024020002d00b302220141ff01460d00200041b3026a21020c010b200041003a00b302024020002d00b402220141ff01460d00200041b4026a21020c010b200041003a00b402024020002d00b502220141ff01460d00200041b5026a21020c010b200041003a00b502024020002d00b602220141ff01460d00200041b6026a21020c010b200041003a00b602024020002d00b702220141ff01460d00200041b7026a21020c010b200041003a00b702024020002d00b802220141ff01460d00200041b8026a21020c010b200041003a00b802024020002d00b902220141ff01460d00200041b9026a21020c010b200041003a00b902024020002d00ba02220141ff01460d00200041ba026a21020c010b200041003a00ba02024020002d00bb02220141ff01460d00200041bb026a21020c010b200041003a00bb02024020002d00bc02220141ff01460d00200041bc026a21020c010b200041003a00bc02024020002d00bd02220141ff01460d00200041bd026a21020c010b200041003a00bd02024020002d00be02220141ff01460d00200041be026a21020c010b200041003a00be02024020002d00bf02220141ff01460d00200041bf026a21020c010b200041003a00bf020c010b2002200141016a3a00000b200041013a00a002200041a0026a41011086808080000c040b2002200141016a3a00000b20002903a002210420002903a802210520002903b0022106200020002903b80222074238883c009f02200020074230883c009e02200020074228883c009d02200020074220883c009c02200020074218883c009b02200020074210883c009a02200020074208883c009902200020073c009802200020064238883c009702200020064230883c009602200020064228883c009502200020064220883c009402200020064218883c009302200020064210883c009202200020064208883c009102200020063c009002200020054238883c008f02200020054230883c008e02200020054228883c008d02200020054220883c008c02200020054218883c008b02200020054210883c008a02200020054208883c008902200020053c008802200020044238883c008702200020044230883c008602200020044228883c008502200020044220883c008402200020044218883c008302200020044210883c008202200020044208883c008102200020043c00800220004180026a41201086808080000c020b2002200141016a3a00000b20002903a002210420002903a802210520002903b0022106200020002903b80222074238883c009f02200020074230883c009e02200020074228883c009d02200020074220883c009c02200020074218883c009b02200020074210883c009a02200020074208883c009902200020073c009802200020064238883c009702200020064230883c009602200020064228883c009502200020064220883c009402200020064218883c009302200020064210883c009202200020064208883c009102200020063c009002200020054238883c008f02200020054230883c008e02200020054228883c008d02200020054220883c008c02200020054218883c008b02200020054210883c008a02200020054208883c008902200020053c008802200020044238883c008702200020044230883c008602200020044228883c008502200020044220883c008402200020044218883c008302200020044210883c008202200020044208883c008102200020043c00800220004180026a41201086808080000b200041c0026a2480808080000b0b1a02004180080b01f7004184080b0c000000000000000000000000009001046e616d650188010a000d6765745f63616c6c5f73697a65010f636f70795f63616c6c5f76616c7565020b73797374656d5f68616c74031063727970746f5f6b656363616b323536040c6c6f61645f73746f72616765050a6765745f73656e646572060a7365745f72657475726e070c736176655f73746f72616765080b77726974655f6576656e740905737461727400750970726f647563657273010c70726f6365737365642d62790105636c616e6755392e302e31202868747470733a2f2f6769746875622e636f6d2f6c6c766d2f6c6c766d2d70726f6a656374206331613061323133333738613435386662656131613563373762333135633764636530386664303529"
                        .HexToBytes())
            };
            if (!virtualMachine.VerifyContract(contract.ByteCode.ToByteArray()))
                throw new Exception("Unable to validate smart-contract code");

            var snapshot = stateManager.NewSnapshot();
            snapshot.Contracts.AddContract(UInt160Utils.Zero, contract);
            stateManager.Approve();

            Console.WriteLine("Contract Hash: " + hash.Buffer.ToHex());

            for (var i = 0; i < 1; ++i)
            {
                var currentTime = TimeUtils.CurrentTimeMillis();
                stateManager.NewSnapshot();

                var sender = "0x6bc32575acb8754886dc283c2c8ac54b1bd93195".HexToBytes().ToUInt160();
                var to = "0xfd893ce89186fc6861d339cb6ab5d75458e3daf3".HexToBytes().ToUInt160();

                /* give to sender 1 token */
                var valueToTransfer = Money.Wei;
                stateManager.CurrentSnapshot.Storage.SetValue(contract.ContractAddress, sender.ToUInt256(),
                    (valueToTransfer * 3).ToUInt256());
                var context = new InvocationContext(sender);

                {
                    /* ERC-20: totalSupply (0x18160ddd) */
                    Console.WriteLine("\nERC-20: totalSupply()");
                    var input = ContractEncoder.Encode("totalSupply()");
                    Console.WriteLine("ABI: " + input.ToHex());
                    var status = virtualMachine.InvokeContract(contract, context, input, 100_000_000_000_000UL);
                    if (status.Status != ExecutionStatus.Ok)
                    {
                        stateManager.Rollback();
                        Console.WriteLine("Contract execution failed: " + status);
                        return;
                    }    
                    Console.WriteLine($"Result: {status.ReturnValue.ToHex()}");
                }
                {
                    /* mint */
                    Console.WriteLine($"\nERC-20: mint({sender.Buffer.ToHex()},{Money.FromDecimal(100)})");
                    var input = ContractEncoder.Encode("mint(address,uint256)", sender, Money.FromDecimal(100));
                    Console.WriteLine("ABI: " + input.ToHex());
                    var status = virtualMachine.InvokeContract(contract, context, input, 100_000_000_000_000UL);
                    if (status.Status != ExecutionStatus.Ok)
                    {
                        stateManager.Rollback();
                        Console.WriteLine("Contract execution failed: " + status);
                        goto exit_mark;
                    }                    
                    Console.WriteLine($"Result: {status.ReturnValue.ToHex()}");
                }
                {
                    /* ERC-20: totalSupply (0x18160ddd) */
                    Console.WriteLine("\nERC-20: totalSupply()");
                    var input = ContractEncoder.Encode("totalSupply()");
                    Console.WriteLine("ABI: " + input.ToHex());
                    var status = virtualMachine.InvokeContract(contract, context, input, 100_000_000_000_000UL);
                    if (status.Status != ExecutionStatus.Ok)
                    {
                        stateManager.Rollback();
                        Console.WriteLine("Contract execution failed: " + status);
                        goto exit_mark;
                    }                    
                    Console.WriteLine($"Result: {status.ReturnValue.ToHex()}");
                }
                {
                    /* ERC-20: balanceOf */
                    Console.WriteLine($"\nERC-20: balanceOf({sender.ToHex()}");
                    var input = ContractEncoder.Encode("balanceOf(address)", sender);
                    Console.WriteLine("ABI: " + input.ToHex());
                    var status = virtualMachine.InvokeContract(contract, context, input, 100_000_000_000_000UL);
                    if (status.Status != ExecutionStatus.Ok)
                    {
                        stateManager.Rollback();
                        Console.WriteLine("Contract execution failed: " + status);
                        goto exit_mark;
                    }                    
                    Console.WriteLine($"Result: {status.ReturnValue.ToHex()}");
                }
                {
                    /* ERC-20: transfer */
                    Console.WriteLine($"\nERC-20: transfer({to.ToHex()},{Money.FromDecimal(50)})");
                    var input = ContractEncoder.Encode("transfer(address,uint256)", to, Money.FromDecimal(50));
                    Console.WriteLine($"ABI: {input.ToHex()}");
                    var status = virtualMachine.InvokeContract(contract, context, input, 100_000_000_000_000UL);
                    if (status.Status != ExecutionStatus.Ok)
                    {
                        stateManager.Rollback();
                        Console.WriteLine("Contract execution failed: " + status);
                        goto exit_mark;
                    }
                    Console.WriteLine($"Result: {status.ReturnValue.ToHex()}");
                }
                {
                    /* ERC-20: balanceOf */
                    Console.WriteLine($"\nERC-20: balanceOf({sender.ToHex()}");
                    var input = ContractEncoder.Encode("balanceOf(address)", sender);
                    Console.WriteLine("ABI: " + input.ToHex());
                    var status = virtualMachine.InvokeContract(contract, context, input, 100_000_000_000_000UL);
                    if (status.Status != ExecutionStatus.Ok)
                    {
                        stateManager.Rollback();
                        Console.WriteLine("Contract execution failed: " + status);
                        goto exit_mark;
                    }                    
                    Console.WriteLine($"Result: {status.ReturnValue.ToHex()}");
                }
                {
                    /* ERC-20: balanceOf */
                    Console.WriteLine($"\nERC-20: balanceOf({to.ToHex()}");
                    var input = ContractEncoder.Encode("balanceOf(address)", to);
                    Console.WriteLine("ABI: " + input.ToHex());
                    var status = virtualMachine.InvokeContract(contract, context, input, 100_000_000_000_000UL);
                    if (status.Status != ExecutionStatus.Ok)
                    {
                        stateManager.Rollback();
                        Console.WriteLine("Contract execution failed: " + status);
                        goto exit_mark;
                    }                    
                    Console.WriteLine($"Result: {status.ReturnValue.ToHex()}");
                }
                
                stateManager.Approve();
                exit_mark:
                var elapsedTime = TimeUtils.CurrentTimeMillis() - currentTime;
                Console.WriteLine("Elapsed Time: " + elapsedTime + "ms");
            }
        }
    }
}